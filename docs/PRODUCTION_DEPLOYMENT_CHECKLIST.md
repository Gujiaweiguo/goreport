# JimuReport v1.0.0 生产上线检查清单

本清单用于确保生产环境部署的顺利进行。

## 一、上线前检查

### 1.1 代码检查

- [ ] 代码已通过 UAT 验收
- [ ] 所有 P0/P1 问题已修复
- [ ] 代码已合并到 main 分支
- [ ] 已创建版本标签 v1.0.0
- [ ] CHANGELOG.md 已更新

```bash
# 验证命令
git checkout main
git pull origin main
git tag -l "v1.0.0"
```

### 1.2 环境检查

- [ ] 生产服务器已准备就绪
- [ ] 域名和 DNS 已配置
- [ ] SSL 证书已准备（如使用 HTTPS）
- [ ] 防火墙规则已配置
- [ ] 监控和告警已配置

### 1.3 资源检查

- [ ] 服务器 CPU/内存/磁盘充足
- [ ] 数据库服务器资源充足
- [ ] 网络带宽充足
- [ ] 备份存储空间充足

### 1.4 配置检查

- [ ] `.env.prod` 文件已配置
- [ ] 数据库密码已修改（强密码）
- [ ] JWT 密钥已修改（32+位随机字符串）
- [ ] 域名配置正确
- [ ] 邮件/通知配置正确

## 二、数据备份

### 2.1 数据库备份

- [ ] 全量数据库备份已完成
- [ ] 备份文件已验证可恢复
- [ ] 备份文件已存储到安全位置

```bash
# 执行备份
./scripts/backup-database.sh

# 验证备份
mysql -u root -p < backup_test.sql
```

### 2.2 文件备份

- [ ] 配置文件已备份
- [ ] 用户上传文件已备份
- [ ] 日志文件已归档

### 2.3 回滚准备

- [ ] 上一版本 Docker 镜像已标记
- [ ] 回滚脚本已准备
- [ ] 数据库回滚脚本已准备

## 三、部署执行

### 3.1 部署前

- [ ] 通知相关人员上线时间
- [ ] 暂停自动部署流水线（如有）
- [ ] 确认维护页面已准备（可选）

### 3.2 部署过程

```bash
# 1. 登录生产服务器
ssh user@production-server

# 2. 进入项目目录
cd /opt/jimureport

# 3. 拉取最新代码
git fetch origin
git checkout v1.0.0

# 4. 执行部署脚本
./scripts/deploy-production.sh
```

- [ ] 步骤1完成
- [ ] 步骤2完成
- [ ] 步骤3完成
- [ ] 步骤4完成

### 3.3 部署验证

- [ ] 所有容器状态正常
- [ ] 健康检查接口返回 200
- [ ] 前端页面正常加载
- [ ] 登录功能正常
- [ ] 数据库连接正常

```bash
# 验证命令
docker compose -f docker-compose.prod.yml ps
curl http://localhost:8085/health
curl -I http://localhost
```

## 四、功能验证

### 4.1 核心功能验证

- [ ] 用户认证（登录/退出）
- [ ] 报表管理（CRUD操作）
- [ ] 大屏设计（拖拽/保存）
- [ ] 图表编辑（预览/配置）
- [ ] 数据源管理（连接/测试）

### 4.2 性能验证

- [ ] 首页加载时间 < 3秒
- [ ] 报表列表加载 < 2秒
- [ ] 数据查询响应 < 1秒
- [ ] 并发用户支持 > 100

### 4.3 安全验证

- [ ] HTTPS 正常工作（如启用）
- [ ] 密码策略生效
- [ ] 权限控制正常
- [ ] SQL注入防护正常
- [ ] XSS防护正常

## 五、监控配置

### 5.1 系统监控

- [ ] CPU 使用率监控
- [ ] 内存使用率监控
- [ ] 磁盘使用率监控
- [ ] 网络流量监控

### 5.2 应用监控

- [ ] 应用性能监控（APM）
- [ ] 错误率监控
- [ ] 响应时间监控
- [ ] 吞吐量监控

### 5.3 业务监控

- [ ] 用户活跃度监控
- [ ] 报表访问统计
- [ ] 错误日志收集
- [ ] 告警规则配置

## 六、文档更新

- [ ] README.md 已更新
- [ ] 部署文档已更新
- [ ] 运维手册已更新
- [ ] 用户通知已发送

## 七、应急预案

### 7.1 回滚方案

- [ ] 回滚流程已文档化
- [ ] 回滚时间窗口已确定
- [ ] 回滚决策人已指定
- [ ] 紧急联系人已确认

### 7.2 故障处理

| 故障类型 | 处理流程 | 负责人 |
|---------|---------|--------|
| 服务不可用 | 1.检查容器状态<br>2.查看日志<br>3.重启服务 | 运维 |
| 数据库故障 | 1.切换到备库<br>2.恢复数据<br>3.切换回主库 | DBA |
| 性能下降 | 1.扩容资源<br>2.优化查询<br>3.限流降级 | 开发 |
| 安全事件 | 1.隔离服务<br>2.分析日志<br>3.修复漏洞 | 安全 |

## 八、上线后检查

### 8.1 即时检查（上线后30分钟）

- [ ] 服务运行稳定
- [ ] 无错误日志
- [ ] 用户可正常访问
- [ ] 监控数据正常

### 8.2 短期检查（上线后4小时）

- [ ] 性能指标正常
- [ ] 用户反馈良好
- [ ] 无重大问题
- [ ] 备份任务正常

### 8.3 长期检查（上线后24小时）

- [ ] 系统运行稳定
- [ ] 数据无丢失
- [ ] 用户满意度高
- [ ] 计划内功能正常

## 九、签字确认

| 角色 | 姓名 | 签字 | 日期 | 备注 |
|------|------|------|------|------|
| 产品经理 | | | | |
| 技术负责人 | | | | |
| 运维负责人 | | | | |
| 测试负责人 | | | | |

## 十、上线后任务

### 10.1 即时任务（今天）

- [ ] 监控服务状态
- [ ] 收集用户反馈
- [ ] 处理紧急问题
- [ ] 发送上线通知

### 10.2 短期任务（本周）

- [ ] 性能优化调整
- [ ] 用户培训
- [ ] 文档完善
- [ ] 问题修复

### 10.3 长期任务（本月）

- [ ] 性能持续优化
- [ ] 功能迭代计划
- [ ] 用户满意度调查
- [ ] 运维流程优化

---

**上线日期**: ___________  
**上线时间**: ___________  
**上线版本**: v1.0.0  
**上线状态**: ☐ 成功  ☐ 回滚  
**备注**: ___________
