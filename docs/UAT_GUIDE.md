# 用户验收测试 (UAT) 指南

本文档提供 goReport 用户验收测试 (UAT) 的详细指南和流程。

## 目录

- [UAT 概述](#uat-概述)
- [准备阶段](#准备阶段)
- [测试流程](#测试流程)
- [验收标准](#验收标准)
- [问题处理](#问题处理)
- [验收通过](#验收通过)
- [验收报告模板](#验收报告模板)

## UAT 概述

### 什么是 UAT

用户验收测试 (User Acceptance Testing, UAT) 是在软件发布前，由最终用户在真实环境中进行的最终测试阶段。

### UAT 的目标

- 验证系统是否满足业务需求
- 确认用户体验符合预期
- 发现并修复关键问题
- 收集用户反馈和改进建议

### UAT 的参与者

| 角色 | 职责 | 人数 |
|------|-------|------|
| 产品经理 | 定义验收标准，协调测试 | 1 |
| 测试负责人 | 组织测试流程，记录问题 | 1 |
| 终端用户 | 执行测试，提供反馈 | 5-10 |
| 开发团队 | 支持，快速修复问题 | 2-3 |

## 准备阶段

### 1. 环境准备

#### UAT 环境要求

```bash
# 部署到 UAT 环境
make build-prod

# 配置环境变量
cp .env.example .env
vi .env  # 修改为 UAT 配置
```

**环境检查清单**：

- [ ] UAT 环境已部署到独立服务器
- [ ] 数据库已初始化并加载测试数据
- [ ] 测试数据覆盖所有使用场景
- [ ] 网络连接稳定
- [ ] 浏览器版本已验证
- [ ] 移动设备已准备（如适用）

#### 测试数据准备

**数据集类别**：

| 数据集 | 用途 | 数据量 |
|-------|------|--------|
| 小数据集 | 基础功能测试 | 10-50 条记录 |
| 中数据集 | 正常使用场景 | 100-500 条记录 |
| 大数据集 | 性能和压力测试 | 5000+ 条记录 |
| 边界数据集 | 异常情况测试 | 包含空值、超长值等 |

**测试数据导入**：

```bash
# 导入测试数据
mysql -uroot -p jimureport < test_data.sql

# 或使用 API 批量导入
python scripts/import_test_data.py --source test_data.csv
```

### 2. UAT 计划

#### 测试时间安排

| 阶段 | 持续时间 | 活动 |
|-------|----------|------|
| 环境准备 | 1 天 | 部署、数据准备 |
| 用户培训 | 0.5 天 | 功能培训、文档讲解 |
| 功能测试 | 3-5 天 | 执行测试用例 |
| 问题修复 | 2-3 天 | 修复发现的问题 |
| 回归测试 | 2 天 | 验证修复 |
| 验收决策 | 0.5 天 | 评审测试结果 |

#### UAT 会议安排

**第一次会议（启动会）**：

- **参与者**：所有 UAT 参与者
- **时长**：1-2 小时
- **议程**：
  1. 介绍 UAT 目标和流程
  2. 演示系统功能
  3. 分配测试任务
  4. 说明报告和反馈方式

**第二次会议（中期检查）**：

- **参与者**：产品经理、测试负责人、关键用户
- **时长**：1 小时
- **议程**：
  1. 评估测试进度
  2. 优先处理 P0/P1 问题
  3. 调整测试计划（如需）

**第三次会议（验收评审）**：

- **参与者**：所有 UAT 参与者
- **时长**：2 小时
- **议程**：
  1. 汇总测试结果
  2. 评估问题严重程度
  3. 讨论改进建议
  4. 做出验收决策

### 3. 文档准备

**测试用例文档**：

```markdown
# goReport UAT 测试用例

## 用户认证

| 用例 ID | 描述 | 步骤 | 预期结果 | 优先级 |
|---------|------|------|---------|--------|
| UC-001 | 用户登录 | 1. 打开登录页面<br>2. 输入用户名和密码<br>3. 点击登录按钮 | 成功登录并跳转到首页 | P0 |
| UC-002 | 登录失败 - 密码错误 | 1. 打开登录页面<br>2. 输入正确用户名和错误密码<br>3. 点击登录按钮 | 显示错误提示 | P1 |
```

**测试环境信息**：

```markdown
## UAT 环境信息

- **环境名称**：UAT
- **访问地址**：https://uat.jimureport.com
- **数据库版本**：MySQL 8.0
- **后端版本**：v1.0.0
- **前端版本**：v1.0.0

## 测试数据

- **用户数量**：10
- **报表数量**：50
- **数据源数量**：5
- **大屏数量**：20
```

## 测试流程

### 1. 登录和认证测试

#### 测试用例

| 编号 | 测试项 | 步骤 | 预期结果 | 实际结果 | 状态 |
|------|--------|------|---------|---------|------|
| AUTH-01 | 正常登录 | 1. 输入有效用户名和密码<br>2. 点击登录按钮 | 登录成功，跳转到首页 |  |  |
| AUTH-02 | 密码错误 | 1. 输入正确用户名和错误密码<br>2. 点击登录按钮 | 显示"用户名或密码错误"提示 |  |  |
| AUTH-03 | 用户名不存在 | 1. 输入不存在的用户名<br>2. 点击登录按钮 | 显示"用户不存在"提示 |  |  |
| AUTH-04 | 空白登录 | 1. 留空用户名和密码<br>2. 点击登录按钮 | 显示"请输入用户名和密码"提示 |  |  |
| AUTH-05 | 退出登录 | 1. 点击退出按钮<br>2. 检查 Token 清除 | 退出成功，需重新登录 |  |  |
| AUTH-06 | Token 过期 | 1. 等待 Token 过期<br>2. 刷新页面 | 自动跳转到登录页 |  |  |
| AUTH-07 | 记住密码 | 1. 勾选"记住我"<br>2. 登录 | 下次访问自动登录 |  |  |

#### 验收标准

- [ ] 所有登录/退出功能正常工作
- [ ] 错误提示清晰且友好
- [ ] Token 管理正确（存储、过期、清除）
- [ ] 浏览器后退不会破坏登录状态

### 2. 报表管理测试

#### 测试用例

| 编号 | 测试项 | 步骤 | 预期结果 | 实际结果 | 状态 |
|------|--------|------|---------|---------|------|
| REPORT-01 | 查看报表列表 | 1. 登录后进入报表管理页<br>2. 查看报表列表 | 显示所有报表，正确分页 |  |  |
| REPORT-02 | 搜索报表 | 1. 输入报表名称<br>2. 点击搜索 | 显示匹配的报表 |  |  |
| REPORT-03 | 创建新报表 | 1. 点击"新建报表"<br>2. 输入报表信息<br>3. 点击保存 | 报表创建成功，显示在列表中 |  |  |
| REPORT-04 | 编辑报表 | 1. 点击报表的"编辑"按钮<br>2. 修改报表配置<br>3. 保存 | 修改保存成功 |  |  |
| REPORT-05 | 删除报表 | 1. 点击报表的"删除"按钮<br>2. 确认删除 | 报表删除成功 |  |  |
| REPORT-06 | 报表预览 | 1. 点击报表的"预览"按钮<br>2. 查看预览结果 | 正确显示报表数据 |  |  |
| REPORT-07 | 导出报表 | 1. 在预览页点击"导出"<br>2. 选择导出格式 | 成功下载文件 |  |  |

#### 验收标准

- [ ] 报表 CRUD 操作流畅
- [ ] 搜索和筛选功能准确
- [ ] 预览数据显示正确
- [ ] 导出功能正常
- [ ] 分页功能正常

### 3. 大屏设计测试

#### 测试用例

| 编号 | 测试项 | 步骤 | 预期结果 | 实际结果 | 状态 |
|------|--------|------|---------|---------|------|
| DASHBOARD-01 | 创建大屏 | 1. 进入大屏设计页<br>2. 点击"新建大屏"<br>3. 输入名称和尺寸<br>4. 保存 | 大屏创建成功 |  |  |
| DASHBOARD-02 | 添加组件 | 1. 从组件库拖拽图表<br>2. 放置到画布 | 组件成功添加 |  |  |
| DASHBOARD-03 | 配置组件数据 | 1. 选中组件<br>2. 在属性面板配置数据源<br>3. 保存 | 数据绑定成功 |  |  |
| DASHBOARD-04 | 调整组件样式 | 1. 选中组件<br>2. 修改样式属性<br>3. 实时查看效果 | 样式正确应用 |  |  |
| DASHBOARD-05 | 图层管理 | 1. 拖拽图层调整顺序<br>2. 锁定/解锁图层<br>3. 隐藏/显示图层 | 图层操作正常 |  |  |
| DASHBOARD-06 | 预览大屏 | 1. 点击"预览"按钮<br>2. 查看全屏效果 | 大屏正确渲染 |  |  |
| DASHBOARD-07 | 保存大屏 | 1. 点击"保存"按钮<br>2. 刷新页面 | 配置正确保存 |  |  |

#### 验收标准

- [ ] 拖拽功能流畅（60fps）
- [ ] 组件属性配置完整
- [ ] 数据绑定准确
- [ ] 预览功能正常
- [ ] 图层管理灵活

### 4. 图表编辑测试

#### 测试用例

| 编号 | 测试项 | 步骤 | 预期结果 | 实际结果 | 状态 |
|------|--------|------|---------|---------|------|
| CHART-01 | 选择图表类型 | 1. 进入图表编辑页<br>2. 选择图表类型 | 图表类型选中 |  |  |
| CHART-02 | 配置数据源 | 1. 选择数据源<br>2. 选择表和字段 | 数据配置成功 |  |  |
| CHART-03 | 设置图表样式 | 1. 配置颜色、字体等<br>2. 查看预览 | 样式正确应用 |  |  |
| CHART-04 | 测试图表交互 | 1. hover 查看数据<br>2. click 查看详情<br>3. 缩放和缩放 | 交互功能正常 |  |  |
| CHART-05 | 实时预览 | 1. 修改配置<br>2. 观察预览区 | 预览即时更新 |  |  |
| CHART-06 | 导出图表 | 1. 点击导出<br>2. 选择格式 | 成功下载 |  |  |

#### 验收标准

- [ ] 图表类型丰富
- [ ] 数据配置灵活
- [ ] 样式自定义完整
- [ ] 交互体验流畅
- [ ] 预览实时更新

### 5. 数据源管理测试

#### 测试用例

| 编号 | 测试项 | 步骤 | 预期结果 | 实际结果 | 状态 |
|------|--------|------|---------|---------|------|
| DATASOURCE-01 | 添加数据源 | 1. 填写连接信息<br>2. 点击测试连接<br>3. 保存 | 数据源添加成功 |  |  |
| DATASOURCE-02 | 测试连接 | 1. 点击"测试连接"<br>2. 查看结果 | 显示连接状态 |  |  |
| DATASOURCE-03 | 查看元数据 | 1. 点击数据源的"表列表"<br>2. 查看字段信息 | 正确显示元数据 |  |  |
| DATASOURCE-04 | 编辑数据源 | 1. 点击"编辑"<br>2. 修改配置<br>3. 保存 | 修改保存成功 |  |  |
| DATASOURCE-05 | 删除数据源 | 1. 点击"删除"<br>2. 确认 | 数据源删除成功 |  |  |

#### 验收标准

- [ ] 数据源连接测试准确
- [ ] 元数据查询正常
- [ ] 错误提示清晰
- [ ] 连接配置灵活

### 6. 性能测试

#### 测试用例

| 编号 | 测试项 | 测试场景 | 预期结果 | 实际结果 | 状态 |
|------|--------|---------|---------|---------|------|
| PERF-01 | 首屏加载 | 打开首页，测量 FCP | FCP < 2s |  |  |
| PERF-02 | 报表列表加载 | 打开报表管理页，测量 LCP | LCP < 3s |  |  |
| PERF-03 | 大数据渲染 | 渲染 10000 行数据 | 不卡顿，保持 60fps |  |  |
| PERF-04 | 并发用户 | 10 个用户同时操作 | 响应时间 < 2s |  |  |
| PERF-05 | 内存使用 | 长时间使用系统 | 内存使用稳定，无泄漏 |  |  |

#### 验收标准

- [ ] 首屏加载时间符合要求
- [ ] 页面交互流畅
- [ ] 并发用户响应正常
- [ ] 内存使用稳定

### 7. 兼容性测试

#### 测试用例

| 编号 | 浏览器 | 版本 | 测试场景 | 状态 |
|------|--------|------|---------|------|
| COMP-01 | Chrome | 120+ | 全部功能 |  |
| COMP-02 | Firefox | 115+ | 全部功能 |  |
| COMP-03 | Safari | 14+ | 全部功能 |  |
| COMP-04 | Edge | 120+ | 全部功能 |  |
| COMP-05 | Chrome Mobile | 120+ | 移动端功能 |  |

#### 验收标准

- [ ] 主流浏览器全部通过
- [ ] 移动端基本功能可用
- [ ] 关键功能跨浏览器一致

### 8. 安全性测试

#### 测试用例

| 编号 | 测试项 | 步骤 | 预期结果 | 实际结果 | 状态 |
|------|--------|------|---------|---------|------|
| SEC-01 | SQL 注入 | 1. 在输入框注入 SQL<br>2. 提交 | 系统拒绝注入，提示错误 |  |  |
| SEC-02 | XSS 攻击 | 1. 输入脚本标签<br>2. 提交 | 脚本不执行，提示错误 |  |  |
| SEC-03 | 权限控制 | 1. 尝试访问无权限资源 | 返回 403 错误 |  |  |
| SEC-04 | Token 过期 | 1. 使用过期 Token | 拒绝访问，提示重新登录 |  |  |
| SEC-05 | 数据泄露 | 1. 查看响应数据 | 敏感数据不泄露 |  |  |

#### 验收标准

- [ ] SQL 注入防护有效
- [ ] XSS 攻击防护有效
- [ ] 权限控制正确
- [ ] Token 管理安全
- [ ] 数据传输加密

## 验收标准

### 功能完整性

| 指标 | 标准 | 目标 | 实际 | 状态 |
|-------|------|------|------|------|
| 功能覆盖率 | 已实现功能 / 需求功能 | 100% |  |  |
| 关键功能通过率 | 通过的关键测试 / 总关键测试 | 100% |  |  |
| 缺陷关闭率 | 已关闭缺陷 / 总缺陷 | 100% |  |  |

### 用户体验

| 指标 | 标准 | 目标 | 实际 | 状态 |
|-------|------|------|------|------|
| 任务完成率 | 成功完成的任务 / 总任务 | ≥ 90% |  |  |
| 用户满意度 | 平均评分 (1-5) | ≥ 4.0 |  |  |
| 学习曲线 | 完成首次任务的时间 | ≤ 30 分钟 |  |  |
| 用户推荐意愿 | 愿意推荐的用户比例 | ≥ 80% |  |  |

### 性能指标

| 指标 | 标准 | 目标 | 实际 | 状态 |
|-------|------|------|------|------|
| 首屏加载时间 | FCP | < 2s |  |  |
| 最大内容绘制 | LCP | < 3s |  |  |
| 页面响应 | FID | < 100ms |  |  |
| 累积布局偏移 | CLS | < 0.1 |  |  |

### 质量标准

| 指标 | 标准 | 目标 | 实际 | 状态 |
|-------|------|------|------|------|
| P0/P1 缺陷数量 | 阻塞性和严重性缺陷 | 0 |  |  |
| P2 缺陷数量 | 中等缺陷 | ≤ 5 |  |  |
| P3 缺陷数量 | 轻微缺陷 | ≤ 10 |  |  |
| 缺陷修复时间 | 平均修复时间 | P0: 24h, P1: 72h, P2: 1w |  |  |

## 问题处理

### 问题报告模板

```markdown
## 问题报告

**问题编号**：UAT-001
**发现人**：张三
**发现时间**：2024-02-06 14:30
**优先级**：P1

### 问题描述

在报表管理页面，当点击"编辑"按钮时，系统没有响应。

### 重现步骤

1. 登录系统
2. 进入报表管理页面
3. 找到"销售报表"
4. 点击"编辑"按钮
5. 观察页面行为

### 预期行为

应该打开报表编辑页面，加载报表配置。

### 实际行为

页面没有响应，浏览器控制台显示错误：`TypeError: Cannot read property 'id' of undefined`

### 影响范围

- 功能：报表编辑
- 用户：所有用户
- 严重性：高（无法编辑报表）

### 截图

[添加截图]

### 环境信息

- 浏览器：Chrome 120
- 操作系统：Windows 11
- 系统版本：v1.0.0
```

### 问题分类

| 类别 | 定义 | 示例 |
|------|------|------|
| 功能缺陷 | 功能未按预期工作 | 编辑按钮无响应 |
| 性能问题 | 系统响应过慢 | 页面加载超过 10s |
| 兼容性问题 | 特定浏览器不工作 | Firefox 无法预览 |
| 易用性问题 | 功能可用但体验不佳 | 按钮位置不合理 |
| 数据问题 | 数据显示不正确 | 报表数据缺失 |
| 安全问题 | 存在安全隐患 | 未授权可访问数据 |

### 问题优先级

| 优先级 | 定义 | 响应时间 |
|-------|------|---------|
| P0 | 阻塞性问题，无法使用核心功能 | 4 小时内 |
| P1 | 严重问题，主要功能受影响 | 24 小时内 |
| P2 | 中等问题，部分功能受限 | 72 小时内 |
| P3 | 轻微问题，美观性或小问题 | 1 周内 |

### 问题修复流程

```
发现问题 → 报告问题 → 分析问题 → 修复问题 → 验证修复 → 关闭问题
                ↓                                    ↑
           评估优先级 ────────────────────────────────┘
```

**修复时间要求**：

| 优先级 | 评估时间 | 修复时间 | 验证时间 | 总时间 |
|-------|---------|---------|---------|--------|
| P0 | 1 小时 | 2 小时 | 1 小时 | 4 小时 |
| P1 | 2 小时 | 8 小时 | 2 小时 | 12 小时 |
| P2 | 4 小时 | 16 小时 | 4 小时 | 24 小时 |
| P3 | 8 小时 | 24 小时 | 8 小时 | 40 小时 |

## 验收通过

### 通过条件

**必须全部满足**：

1. ✅ 所有 P0 和 P1 缺陷已修复并验证
2. ✅ 功能完整性 ≥ 95%
3. ✅ 用户满意度 ≥ 4.0
4. ✅ 关键性能指标达标
5. ✅ 主流浏览器兼容性测试通过
6. ✅ 安全测试无严重问题

### 通过决策

**会议议程**：

1. 汇总测试结果
2. 评估缺陷修复情况
3. 讨论用户反馈
4. 做出验收决策

**决策选项**：

| 决策 | 条件 | 行动 |
|------|------|------|
| 通过 | 所有通过条件满足 | 安排生产环境部署 |
| 有条件通过 | 非关键问题遗留，有缓解方案 | 部署生产环境，计划后续修复 |
| 不通过 | 关键问题未解决或严重缺陷 | 返回开发阶段，重新测试 |

## 验收报告模板

```markdown
# goReport v1.0.0 UAT 验收报告

## 基本信息

| 项目 | 信息 |
|------|------|
| 项目名称 | goReport |
| 版本 | v1.0.0 |
| UAT 开始日期 | 2024-02-01 |
| UAT 结束日期 | 2024-02-14 |
| UAT 参与人数 | 8 人 |

## 测试执行统计

| 测试类别 | 测试用例数 | 通过 | 失败 | 阻塞 | 通过率 |
|---------|----------|------|------|------|--------|
| 用户认证 | 7 | 7 | 0 | 0 | 100% |
| 报表管理 | 7 | 7 | 0 | 0 | 100% |
| 大屏设计 | 7 | 6 | 1 | 0 | 85.7% |
| 图表编辑 | 6 | 6 | 0 | 0 | 100% |
| 数据源管理 | 5 | 5 | 0 | 0 | 100% |
| 性能测试 | 5 | 4 | 1 | 0 | 80% |
| 兼容性测试 | 5 | 5 | 0 | 0 | 100% |
| 安全性测试 | 5 | 5 | 0 | 0 | 100% |
| **总计** | **47** | **45** | **2** | **0** | **95.7%** |

## 缺陷统计

| 优先级 | 数量 | 修复数 | 未修复数 | 修复率 |
|-------|------|--------|---------|--------|
| P0 | 0 | 0 | 0 | N/A |
| P1 | 1 | 1 | 0 | 100% |
| P2 | 1 | 1 | 0 | 100% |
| P3 | 0 | 0 | 0 | N/A |
| **总计** | **2** | **2** | **0** | **100%** |

## 用户反馈汇总

### 功能满意度

| 功能 | 满意度 (1-5) | 主要建议 |
|------|----------------|---------|
| 用户认证 | 5.0 | 无 |
| 报表管理 | 4.5 | 希望添加批量导入功能 |
| 大屏设计 | 4.0 | 拖拽偶尔不流畅 |
| 图表编辑 | 4.8 | 图表类型很丰富 |
| 数据源管理 | 5.0 | 连接测试很快 |

**平均满意度**：4.66 / 5.0

### 改进建议

1. 大屏设计器的拖拽功能需要优化性能
2. 希望添加报表批量导入/导出功能
3. 移动端大屏查看体验需要改进

## 性能测试结果

| 指标 | 目标 | 实际 | 状态 |
|-------|------|------|------|
| FCP | < 2s | 1.5s | ✅ 通过 |
| LCP | < 3s | 2.3s | ✅ 通过 |
| FID | < 100ms | 85ms | ✅ 通过 |
| CLS | < 0.1 | 0.05 | ✅ 通过 |

## 兼容性测试结果

| 浏览器 | 版本 | 结果 |
|--------|------|------|
| Chrome | 120 | ✅ 全部通过 |
| Firefox | 115 | ✅ 全部通过 |
| Safari | 17 | ⚠️  大屏拖拽卡顿 |
| Edge | 120 | ✅ 全部通过 |

## 遗留问题

| 问题编号 | 优先级 | 描述 | 缓解方案 | 计划修复 |
|---------|-------|------|---------|---------|
| UAT-008 | P2 | Safari 拖拽卡顿 | 用户可使用其他浏览器 | v1.0.1 |
| UAT-012 | P2 | 无批量导入功能 | 临时使用单次导入 | v1.1.0 |

## 验收结论

### 验收决策

**决策**：✅ 通过

### 决策理由

1. ✅ 所有关键功能正常工作
2. ✅ 缺陷修复率 100%
3. ✅ 用户满意度 4.66 / 5.0
4. ✅ 性能指标全部达标
5. ✅ 主流浏览器兼容性良好
6. ✅ 安全性测试无严重问题

遗留问题为非关键问题，有明确的缓解方案和修复计划，不影响核心功能使用。

### 后续行动计划

1. **立即执行**：安排生产环境部署
   - 预计部署时间：2024-02-15
   - 负责人：运维团队

2. **短期计划**（1-2 周）：
   - 修复 UAT-008（Safari 拖拽优化）
   - 负责人：前端开发团队

3. **中期计划**（1-2 个月）：
   - 实现 UAT-012（批量导入功能）
   - 负责人：产品团队 + 开发团队

### 签字确认

| 角色 | 姓名 | 签字 | 日期 |
|------|------|------|------|
| 产品经理 |  |  | |
| 测试负责人 |  |  | |
| 用户代表 |  |  | |
| 开发负责人 |  |  | |

---

**报告生成时间**：2024-02-14 16:30
**报告生成人**：测试负责人
```

## 持续改进

### 用户反馈收集

**反馈渠道**：

| 渠道 | 用途 | 实施方式 |
|------|------|---------|
| 应用内反馈 | 快速问题报告 | 悬浮反馈按钮 |
| 用户调研 | 深入了解 | 定期问卷调查 |
| 使用数据 | 行为分析 | Google Analytics |
| 社区讨论 | 开放交流 | GitHub Discussions |

### 改进流程

```
收集反馈 → 分析问题 → 优先排序 → 实施改进 → 验证效果
    ↑                                                ↓
持续监控 ←───────────────────────────────┘
```

### 关键指标 (KPI)

| 指标 | 计算 | 目标 | 当前 | 改进 |
|------|------|------|------|------|
| 日活跃用户 (DAU) | 唯一用户数 | 持续增长 |  |  |
| 用户留存率 | 7 日留存用户 / 总用户 | > 60% |  |  |
| 任务完成率 | 完成任务数 / 总任务数 | > 85% |  |  |
| 用户满意度 | 平均评分 | ≥ 4.0 |  |  |

## 获取帮助

如需要 UAT 相关帮助：

- 查看 UAT 文档：`https://docs.jimureport.com/uat`
- 联系 UAT 协调人：`uat@jimureport.com`
- 提交 UAT 问题：GitHub Issues (标签：uat)
- 技术支持：`support@jimureport.com`

---

**注意**：UAT 是产品发布前的关键环节，应认真执行和记录所有测试结果。
