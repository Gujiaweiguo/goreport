# Authentication and Datasource Management - ä»»åŠ¡æ¸…å•

> **é¢„è®¡è€—æ—¶**ï¼š3-5 å¤©
> **å¼€å§‹æ—¥æœŸ**ï¼š2026-02-04

---

## ğŸ” é˜¶æ®µä¸€ï¼šè®¤è¯åŸºç¡€è®¾æ–½ï¼ˆ1 å¤©ï¼‰

### ä»»åŠ¡ 1.1ï¼šç”¨æˆ·æ¨¡å‹å’Œ JWT é…ç½®
**æ–‡ä»¶**ï¼š`backend/internal/models/user.go`, `backend/internal/auth/jwt.go`

**ç›®æ ‡**ï¼šå®šä¹‰ç”¨æˆ·æ•°æ®æ¨¡å‹å’Œ JWT é…ç½®ç»“æ„

**å†…å®¹**ï¼š
```go
// models/user.go
type User struct {
    ID       string `gorm:"primaryKey;type:varchar(36)" json:"id"`
    Username string `gorm:"uniqueIndex;type:varchar(50)" json:"username"`
    Password string `gorm:"type:varchar(255)" json:"-"`
    Role     string `gorm:"type:varchar(50)" json:"role"`
    TenantID string `gorm:"index;type:varchar(36)" json:"tenantId"`
}

// auth/jwt.go
type Claims struct {
    UserID   string   `json:"userId"`
    Username string   `json:"username"`
    Roles    []string `json:"roles"`
    TenantID string   `json:"tenantId"`
    jwt.RegisteredClaims
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] User æ¨¡å‹åŒ…å«å¿…éœ€å­—æ®µï¼ˆIDã€Usernameã€Passwordã€Roleã€TenantIDï¼‰
- [x] Claims ç»“æ„ä½“æ˜ å°„ JWT claims
- [x] å¯†ç å­—æ®µåœ¨ JSON ä¸­éšè—

---

### ä»»åŠ¡ 1.2ï¼šJWT è®¤è¯ä¸­é—´ä»¶
**æ–‡ä»¶**ï¼š`backend/internal/auth/middleware.go`

**ç›®æ ‡**ï¼šå®ç° JWT è®¤è¯ä¸­é—´ä»¶

**å†…å®¹**ï¼š
- ä»è¯·æ±‚å¤´æˆ–å‚æ•°æå– Token
- éªŒè¯ Token æœ‰æ•ˆæ€§
- è§£æ Claims å¹¶æ³¨å…¥ä¸Šä¸‹æ–‡
- é…ç½®å…¬å¼€è·¯ç”±ï¼ˆç™½åå•ï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] ä¸­é—´ä»¶èƒ½æå–å’ŒéªŒè¯ JWT
- [x] æ— æ•ˆ Token è¿”å› 401
- [x] å…¬å¼€è·¯ç”±è·³è¿‡éªŒè¯
- [x] ç”¨æˆ·ä¿¡æ¯æ³¨å…¥è¯·æ±‚ä¸Šä¸‹æ–‡

---

### ä»»åŠ¡ 1.3ï¼šToken ç”Ÿæˆå’ŒéªŒè¯å·¥å…·
**æ–‡ä»¶**ï¼š`backend/internal/auth/jwt.go`

**ç›®æ ‡**ï¼šå®ç° Token ç”Ÿæˆå’ŒéªŒè¯å‡½æ•°

**å†…å®¹**ï¼š
```go
func GenerateToken(user *models.User) (string, error)
func ValidateToken(tokenString string) (*Claims, error)
func HashPassword(password string) (string, error)
func CheckPassword(password, hash string) bool
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] èƒ½ç”Ÿæˆæœ‰æ•ˆ JWT Token
- [x] èƒ½éªŒè¯ Token å¹¶è§£æ Claims
- [x] å¯†ç å“ˆå¸Œå’ŒéªŒè¯æ­£ç¡®

---

## ğŸ”‘ é˜¶æ®µäºŒï¼šç™»å½•/ç™»å‡º APIï¼ˆ0.5 å¤©ï¼‰

### ä»»åŠ¡ 2.1ï¼šç™»å½• API
**æ–‡ä»¶**ï¼š`backend/internal/httpserver/handlers/auth.go`

**ç›®æ ‡**ï¼šå®ç°ç”¨æˆ·ç™»å½•æ¥å£

**å†…å®¹**ï¼š
```go
type LoginRequest struct {
    Username string `json:"username" binding:"required"`
    Password string `json:"password" binding:"required"`
}

type LoginResponse struct {
    Token string `json:"token"`
    User  *models.User `json:"user"`
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] ç™»å½•æˆåŠŸè¿”å› Token å’Œç”¨æˆ·ä¿¡æ¯
- [x] ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯è¿”å› 401
- [x] å¯†ç ä½¿ç”¨å“ˆå¸ŒéªŒè¯

**æµ‹è¯•è¯´æ˜**ï¼š
- ç™»å½• API æ­£å¸¸å·¥ä½œï¼Œæµ‹è¯•è¿”å› 401ï¼ˆç”¨æˆ·ä¸å­˜åœ¨ï¼Œé¢„æœŸè¡Œä¸ºï¼‰
- éœ€è¦åˆ›å»ºæµ‹è¯•ç”¨æˆ·æ‰èƒ½éªŒè¯å®Œæ•´ç™»å½•æµç¨‹

---

### ä»»åŠ¡ 2.2ï¼šç™»å‡º API
**æ–‡ä»¶**ï¼š`backend/internal/httpserver/handlers/auth.go`

**ç›®æ ‡**ï¼šå®ç°ç”¨æˆ·ç™»å‡ºæ¥å£

**å†…å®¹**ï¼š
- å®ç°é»‘åå•æœºåˆ¶ï¼ˆä½¿ç”¨ Redisï¼‰
- æˆ–ç®€åŒ–ç‰ˆæœ¬ï¼šå®¢æˆ·ç«¯æ¸…é™¤ Token

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] ç™»å‡ºå Token å¤±æ•ˆï¼ˆä½¿ç”¨å†…å­˜é»‘åå•ï¼‰
- [x] æˆ–æä¾›å®¢æˆ·ç«¯æ¸…é™¤ Token æ–¹æ¡ˆ

**å®ç°è¯´æ˜**ï¼š
- ä½¿ç”¨å†…å­˜é»‘åå•ï¼ŒæœåŠ¡é‡å¯åä¼šæ¸…ç©º

---

## ğŸ“Š é˜¶æ®µä¸‰ï¼šæ•°æ®æºæ¨¡å‹ï¼ˆ0.5 å¤©ï¼‰

### ä»»åŠ¡ 3.1ï¼šæ•°æ®æºæ¨¡å‹å®šä¹‰
**æ–‡ä»¶**ï¼š`backend/internal/models/datasource.go`

**ç›®æ ‡**ï¼šå®šä¹‰æ•°æ®æºæ•°æ®æ¨¡å‹

**å†…å®¹**ï¼š
```go
type DataSource struct {
    ID          string `gorm:"primaryKey;type:varchar(36)" json:"id"`
    Name        string `gorm:"type:varchar(100)" json:"name"`
    Type        string `gorm:"type:varchar(20)" json:"type"` // mysql, postgresql
    Host        string `gorm:"type:varchar(255)" json:"host"`
    Port        int    `gorm:"type:int" json:"port"`
    Database    string `gorm:"type:varchar(100)" json:"database"`
    Username    string `gorm:"type:varchar(100)" json:"username"`
    Password    string `gorm:"type:varchar(255)" json:"-"`
    TenantID    string `gorm:"index;type:varchar(36)" json:"tenantId"`
    CreatedAt   time.Time `json:"createdAt"`
    UpdatedAt   time.Time `json:"updatedAt"`
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] æ¨¡å‹åŒ…å«è¿æ¥ä¿¡æ¯å­—æ®µ
- [x] å¯†ç å­—æ®µåœ¨ JSON ä¸­éšè—
- [x] æ”¯æŒç§Ÿæˆ·éš”ç¦»

---

### ä»»åŠ¡ 3.2ï¼šæ•°æ®æº Repository å±‚
**æ–‡ä»¶**ï¼š`backend/internal/repository/datasource.go`

**ç›®æ ‡**ï¼šå®ç°æ•°æ®æºæ•°æ®è®¿é—®å±‚

**å†…å®¹**ï¼š
```go
type DataSourceRepository interface {
    Create(ctx context.Context, ds *models.DataSource) error
    GetByID(ctx context.Context, id string) (*models.DataSource, error)
    List(ctx context.Context, tenantID string) ([]*models.DataSource, error)
    Update(ctx context.Context, ds *models.DataSource) error
    Delete(ctx context.Context, id string) error
}
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] å®ç°æ‰€æœ‰ CRUD æ–¹æ³•
- [x] æ”¯æŒç§Ÿæˆ·éš”ç¦»
- [x] é”™è¯¯å¤„ç†å®Œæ•´

---

## ğŸ—„ï¸ é˜¶æ®µå››ï¼šæ•°æ®æº CRUD APIï¼ˆ1 å¤©ï¼‰

### ä»»åŠ¡ 4.1ï¼šåˆ›å»ºæ•°æ®æº
**æ–‡ä»¶**ï¼š`backend/internal/httpserver/handlers/datasource.go`

**ç›®æ ‡**ï¼šå®ç°åˆ›å»ºæ•°æ®æºæ¥å£

**å†…å®¹**ï¼š
- è¯·æ±‚å‚æ•°éªŒè¯
- æ•°æ®æºé…ç½®éªŒè¯
- ä¿å­˜åˆ°æ•°æ®åº“
- è¿”å›åˆ›å»ºç»“æœ

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] åˆ›å»ºæˆåŠŸè¿”å›æ•°æ®æºä¿¡æ¯
- [x] å‚æ•°é”™è¯¯è¿”å› 400
- [x] è®¤è¯ç”¨æˆ·æ‰èƒ½åˆ›å»º

**æµ‹è¯•è¯´æ˜**ï¼š
- API æ­£ç¡®å·¥ä½œï¼Œæœªè®¤è¯è¯·æ±‚è¿”å› 401ï¼ˆé¢„æœŸï¼‰
- éœ€è¦å…ˆç™»å½•è·å– token æ‰èƒ½åˆ›å»ºæ•°æ®æº

---

### ä»»åŠ¡ 4.2ï¼šæŸ¥è¯¢æ•°æ®æºåˆ—è¡¨
**æ–‡ä»¶**ï¼š`backend/internal/httpserver/handlers/datasource.go`

**ç›®æ ‡**ï¼šå®ç°æŸ¥è¯¢æ•°æ®æºåˆ—è¡¨æ¥å£

**å†…å®¹**ï¼š
- è¿”å›å½“å‰ç§Ÿæˆ·çš„æ‰€æœ‰æ•°æ®æº
- å¯†ç å­—æ®µéšè—

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] åˆ›å»ºæˆåŠŸè¿”å›æ–°æ•°æ®
- [x] åªèƒ½æ›´æ–°è‡ªå·±çš„æ•°æ®æº
- [x] æ•°æ®æºä¸å­˜åœ¨è¿”å› 404

---

### ä»»åŠ¡ 4.4ï¼šåˆ é™¤æ•°æ®æº
**æ–‡ä»¶**ï¼š`backend/internal/httpserver/handlers/datasource.go`

**ç›®æ ‡**ï¼šå®ç°åˆ é™¤æ•°æ®æºæ¥å£

**å†…å®¹**ï¼š
- éªŒè¯æ•°æ®æºå½’å±ï¼ˆç§Ÿæˆ·ï¼‰
- è½¯åˆ é™¤ï¼ˆæ ‡è®° deleted_atï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] åªèƒ½åˆ é™¤è‡ªå·±çš„æ•°æ®æº
- [x] åˆ é™¤æˆåŠŸè¿”å›ç¡®è®¤
- [x] æ•°æ®æºä¸å­˜åœ¨è¿”å› 404

---

## ğŸ”Œ é˜¶æ®µäº”ï¼šæ•°æ®æºè¿æ¥æµ‹è¯•ï¼ˆ0.5 å¤©ï¼‰

### ä»»åŠ¡ 5.1ï¼šè¿æ¥æµ‹è¯• API
**æ–‡ä»¶**ï¼š`backend/internal/httpserver/handlers/datasource.go`

**ç›®æ ‡**ï¼šå®ç°æ•°æ®æºè¿æ¥æµ‹è¯•æ¥å£

**å†…å®¹**ï¼š
- ä½¿ç”¨æä¾›çš„è¿æ¥ä¿¡æ¯å°è¯•è¿æ¥
- è¿”å›æˆåŠŸæˆ–è¯¦ç»†é”™è¯¯ä¿¡æ¯
- ä¸ä¿å­˜è¿æ¥ä¿¡æ¯

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] è¿æ¥æˆåŠŸè¿”å›æˆåŠŸçŠ¶æ€
- [x] è¿æ¥å¤±è´¥è¿”å›å…·ä½“é”™è¯¯
- [x] æ”¯æŒå¤šç§æ•°æ®æºç±»å‹

---

## ğŸ“‹ é˜¶æ®µå…­ï¼šæ•°æ®æºå…ƒæ•°æ®æŸ¥è¯¢ï¼ˆ1 å¤©ï¼‰

### ä»»åŠ¡ 6.1ï¼šè·å–è¡¨åˆ—è¡¨
**æ–‡ä»¶**ï¼š`backend/internal/datasource/metadata.go`

**ç›®æ ‡**ï¼šå®ç°è·å–æ•°æ®æºæ‰€æœ‰è¡¨å

**å†…å®¹**ï¼š
```go
func GetTables(ctx context.Context, db *gorm.DB, datasourceID string) ([]string, error)
```
- æŸ¥è¯¢ information_schema.tables
- è¿‡æ»¤å½“å‰æ•°æ®åº“

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] è¿”å›æ‰€æœ‰åŸºè¡¨å
- [x] æ”¯æŒæ•°æ®æºç±»å‹è¿‡æ»¤
- [x] é”™è¯¯å¤„ç†å®Œæ•´

---

### ä»»åŠ¡ 6.2ï¼šè·å–å­—æ®µåˆ—è¡¨
**æ–‡ä»¶**ï¼š`backend/internal/datasource/metadata.go`

**ç›®æ ‡**ï¼šå®ç°è·å–è¡¨çš„æ‰€æœ‰å­—æ®µ

**å†…å®¹**ï¼š
```go
type FieldInfo struct {
    Name     string `json:"name"`
    Type     string `json:"type"`
    Nullable  bool   `json:"nullable"`
    Comment  string `json:"comment"`
}

func GetFields(ctx context.Context, db *gorm.DB, datasourceID, tableName string) ([]FieldInfo, error)
```
- æŸ¥è¯¢ information_schema.columns
- è¿”å›å­—æ®µè¯¦ç»†ä¿¡æ¯

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] è¿”å›å­—æ®µåç§°ã€ç±»å‹ç­‰ä¿¡æ¯
- [x] æŒ‰å­—æ®µé¡ºåºæ’åº
- [x] é”™è¯¯å¤„ç†å®Œæ•´

---

### ä»»åŠ¡ 6.3ï¼šå…ƒæ•°æ® API è·¯ç”±
**æ–‡ä»¶**ï¼š`backend/internal/httpserver/handlers/datasource.go`

**ç›®æ ‡**ï¼šæ·»åŠ å…ƒæ•°æ®æŸ¥è¯¢ HTTP ç«¯ç‚¹

**å†…å®¹**ï¼š
```go
GET /api/v1/datasource/:id/tables
GET /api/v1/datasource/:id/tables/:table/fields
```

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] è¡¨åˆ—è¡¨ç«¯ç‚¹æ­£å¸¸å·¥ä½œ
- [x] å­—æ®µåˆ—è¡¨ç«¯ç‚¹æ­£å¸¸å·¥ä½œ
- [x] è®¤è¯ç”¨æˆ·æ‰èƒ½è®¿é—®
- [x] éªŒè¯æ•°æ®æºå½’å±

---

## ğŸ¨ é˜¶æ®µä¸ƒï¼šå‰ç«¯é›†æˆï¼ˆ1 å¤©ï¼‰

### ä»»åŠ¡ 7.1ï¼šå‰ç«¯ç™»å½•é¡µé¢
**æ–‡ä»¶**ï¼š`frontend/src/views/Login.vue`, `frontend/src/api/auth.ts`

**ç›®æ ‡**ï¼šåˆ›å»ºç™»å½•ç•Œé¢å’Œè®¤è¯ API

**å†…å®¹**ï¼š
- ç”¨æˆ·å/å¯†ç è¡¨å•
- ç™»å½•æŒ‰é’®å’Œé”™è¯¯æç¤º
- å­˜å‚¨ Token åˆ° localStorage
- é‡å®šå‘åˆ°é¦–é¡µ

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] ç™»å½•è¡¨å•æ­£å¸¸æ˜¾ç¤º
- [x] ç™»å½•æˆåŠŸå­˜å‚¨ Token
- [x] ç™»å½•å¤±è´¥æ˜¾ç¤ºé”™è¯¯
- [x] æ”¯æŒè®°ä½å¯†ç 

---

### ä»»åŠ¡ 7.2ï¼šå‰ç«¯æ•°æ®æºç®¡ç†é¡µé¢
**æ–‡ä»¶**ï¼š`frontend/src/views/DatasourceManage.vue`, `frontend/src/api/datasource.ts`

**ç›®æ ‡**ï¼šåˆ›å»ºæ•°æ®æºç®¡ç†ç•Œé¢

**å†…å®¹**ï¼š
- æ•°æ®æºåˆ—è¡¨
- æ–°å¢/ç¼–è¾‘/åˆ é™¤æ•°æ®æº
- è¿æ¥æµ‹è¯•æŒ‰é’®
- è¡¨å’Œå­—æ®µæŸ¥çœ‹å™¨

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] æ•°æ®æºåˆ—è¡¨æ­£å¸¸æ˜¾ç¤º
- [x] CRUD æ“ä½œæ­£å¸¸
- [x] è¿æ¥æµ‹è¯•è¿”å›ç»“æœ
- [x] èƒ½æŸ¥çœ‹è¡¨å’Œå­—æ®µ

---

## ğŸ§ª é˜¶æ®µå…«ï¼šåŸºç¡€æµ‹è¯•ï¼ˆ0.5 å¤©ï¼‰

### ä»»åŠ¡ 8.1ï¼šè®¤è¯åŠŸèƒ½æµ‹è¯•
**æ–‡ä»¶**ï¼š`backend/internal/auth/` æˆ– `backend/test/auth_test.go`

**ç›®æ ‡**ï¼šæµ‹è¯•è®¤è¯åŠŸèƒ½

**æµ‹è¯•åœºæ™¯**ï¼š
- ç”Ÿæˆ Token å’ŒéªŒè¯ Token
- å¯†ç å“ˆå¸Œå’ŒéªŒè¯
- è®¤è¯ä¸­é—´ä»¶è¡Œä¸º

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [x] è¦†ç›–ä¸»è¦è·¯å¾„

---

### ä»»åŠ¡ 8.2ï¼šæ•°æ®æºåŠŸèƒ½æµ‹è¯•
**æ–‡ä»¶**ï¼š`backend/internal/datasource/` æˆ– `backend/test/datasource_test.go`

**ç›®æ ‡**ï¼šæµ‹è¯•æ•°æ®æºåŠŸèƒ½

**æµ‹è¯•åœºæ™¯**ï¼š
- CRUD æ“ä½œ
- è¿æ¥æµ‹è¯•
- å…ƒæ•°æ®æŸ¥è¯¢

**éªŒæ”¶æ ‡å‡†**ï¼š
- [x] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [x] è¦†ç›–ä¸»è¦è·¯å¾„

---

## ğŸ“Š æ€»è®¡

- **æ€»ä»»åŠ¡æ•°**ï¼š23
- **é¢„è®¡æ€»è€—æ—¶**ï¼š5 å¤©ï¼ˆ1 å‘¨ï¼‰
- **å‚ä¸æ¨¡å—**ï¼šåç«¯ 20 ä¸ªï¼Œå‰ç«¯ 2 ä¸ª
- **é£é™©ç­‰çº§**ï¼šä¸­

---

## ğŸ”„ ä»»åŠ¡çŠ¶æ€

| ID | é˜¶æ®µ | ä»»åŠ¡ | çŠ¶æ€ |
|----|------|------|------|
| 1.1 | è®¤è¯åŸºç¡€ | ç”¨æˆ·æ¨¡å‹å’Œ JWT é…ç½® | âœ… å·²å®Œæˆ |
| 1.2 | è®¤è¯åŸºç¡€ | JWT è®¤è¯ä¸­é—´ä»¶ | âœ… å·²å®Œæˆ |
| 1.3 | è®¤è¯åŸºç¡€ | Token ç”Ÿæˆå’ŒéªŒè¯å·¥å…· | âœ… å·²å®Œæˆ |
| 2.1 | ç™»å½•/ç™»å‡º | ç™»å½• API | âœ… å·²å®Œæˆï¼ˆå·²éªŒè¯ï¼‰ |
| 2.2 | ç™»å½•/ç™»å‡º | ç™»å‡º API | âœ… å·²å®Œæˆ |
| 3.1 | æ•°æ®æºæ¨¡å‹ | æ•°æ®æºæ¨¡å‹å®šä¹‰ | âœ… å·²å®Œæˆ |
| 3.2 | æ•°æ®æºæ¨¡å‹ | æ•°æ®æº Repository å±‚ | âœ… å·²å®Œæˆ |
| 4.1 | æ•°æ®æº CRUD | åˆ›å»ºæ•°æ®æº | âœ… å·²å®Œæˆ |
| 4.2 | æ•°æ®æº CRUD | æŸ¥è¯¢æ•°æ®æºåˆ—è¡¨ | âœ… å·²å®Œæˆ |
| 4.3 | æ•°æ®æº CRUD | æ›´æ–°æ•°æ®æº | âœ… å·²å®Œæˆ |
| 4.4 | æ•°æ®æº CRUD | åˆ é™¤æ•°æ®æº | âœ… å·²å®Œæˆ |
| 5.1 | è¿æ¥æµ‹è¯• | è¿æ¥æµ‹è¯• API | âœ… å·²å®Œæˆ |
| 6.1 | å…ƒæ•°æ®æŸ¥è¯¢ | è·å–è¡¨åˆ—è¡¨ | âœ… å·²å®Œæˆ |
| 6.2 | å…ƒæ•°æ®æŸ¥è¯¢ | è·å–å­—æ®µåˆ—è¡¨ | âœ… å·²å®Œæˆ |
| 6.3 | å…ƒæ•°æ®æŸ¥è¯¢ | å…ƒæ•°æ® API è·¯ç”± | âœ… å·²å®Œæˆ |
| 7.1 | å‰ç«¯é›†æˆ | å‰ç«¯ç™»å½•é¡µé¢ | âœ… å·²å®Œæˆï¼ˆå·²éªŒè¯ï¼‰ |
| 7.2 | å‰ç«¯é›†æˆ | å‰ç«¯æ•°æ®æºç®¡ç†é¡µé¢ | âœ… å·²å®Œæˆï¼ˆå·²éªŒè¯ï¼‰ |
| 8.1 | åŸºç¡€æµ‹è¯• | è®¤è¯åŠŸèƒ½æµ‹è¯• | âœ… å·²å®Œæˆï¼ˆç™»å½•é“¾è·¯å·²éªŒè¯ï¼‰ |
| 8.2 | åŸºç¡€æµ‹è¯• | æ•°æ®æºåŠŸèƒ½æµ‹è¯• | âœ… å·²å®Œæˆï¼ˆåˆ›å»º/åˆ—è¡¨å·²éªŒè¯ï¼‰ |

---

## ğŸ“ å¤‡æ³¨

- æ‰€æœ‰ä»»åŠ¡æŒ‰é¡ºåºä¾èµ–ï¼Œå‰åç«¯å¯å¹¶è¡Œå¼€å‘ï¼ˆé˜¶æ®µä¸ƒéœ€åç«¯å…ˆå®Œæˆï¼‰
- é˜¶æ®µä¸€è‡³å…­ä¸ºåç«¯å·¥ä½œï¼Œé˜¶æ®µä¸ƒä¸ºå‰ç«¯å·¥ä½œ
- åŸºç¡€æµ‹è¯•é˜¶æ®µå¯ä»¥ä¸å®ç°é˜¶æ®µç©¿æ’è¿›è¡Œ
- è®¤è¯å’Œæ•°æ®æºåŠŸèƒ½æ˜¯åç»­æŠ¥è¡¨åŠŸèƒ½çš„åŸºç¡€

## ğŸ” æµ‹è¯•çŠ¶æ€

### åç«¯ API æµ‹è¯•
- **å¥åº·æ£€æŸ¥**ï¼šâœ… é€šè¿‡ï¼ˆdatabase: connectedï¼‰
- **ç™»å½• API**ï¼šâœ… æ­£å¸¸å·¥ä½œ
  - ä½¿ç”¨ create-user CLI å·¥å…·åˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼Œç™»å½•æˆåŠŸå¹¶è¿”å› token
- **æ•°æ®æº API**ï¼šâœ… æ­£å¸¸å·¥ä½œ
  - ä½¿ç”¨ token åˆ›å»ºæ•°æ®æºå¹¶æˆåŠŸåˆ—å‡º

### åŸºç¡€æµ‹è¯•é˜¶æ®µï¼šâœ… å·²å®Œæˆ
- å·²æ–°å¢å•å…ƒæµ‹è¯•è¦†ç›– JWT ç”Ÿæˆ/æ ¡éªŒä¸å¯†ç å“ˆå¸Œã€ä»¥åŠæ•°æ®æºå…ƒæ•°æ®æŸ¥è¯¢ï¼ˆéœ€è®¾ç½® TEST_DB_DSNï¼‰ã€‚
- åç«¯ API æ­£å¸¸å·¥ä½œï¼ˆ/healthã€/api/v1/auth/loginã€/api/v1/datasource/*ï¼‰
- è®¤è¯ä¸­é—´ä»¶æ­£å¸¸ï¼ˆæœªè®¤è¯è¯·æ±‚è¿”å› 401ï¼‰
- ç™»å½•é“¾è·¯å·²éªŒè¯ï¼ˆåˆ›å»ºç”¨æˆ· â†’ ç™»å½• â†’ è¿”å› tokenï¼‰
- æ•°æ®æºé“¾è·¯å·²éªŒè¯ï¼ˆtoken åˆ›å»º â†’ åˆ—è¡¨ â†’ æ›´æ–° â†’ åˆ é™¤ï¼‰
- å…ƒæ•°æ®é“¾è·¯å·²éªŒè¯ï¼ˆtables/fieldsï¼‰

### å‰ç«¯é›†æˆé˜¶æ®µï¼šâœ… å·²å®Œæˆå¹¶å·²éªŒè¯ï¼ˆä»£ç å®ç°å®Œæˆï¼‰
- ç™»å½•é¡µé¢ï¼šè¡¨å•éªŒè¯ã€é”™è¯¯æç¤ºã€token å­˜å‚¨ã€æˆåŠŸåè·³è½¬
- æ•°æ®æºç®¡ç†é¡µé¢ï¼šè¡¨æ ¼ã€å¯¹è¯æ¡†ï¼ˆåˆ›å»º/ç¼–è¾‘/åˆ é™¤ï¼‰ã€æµ‹è¯•è¿æ¥ã€è¡¨/å­—æ®µä¸‹æ‹‰
- è·¯ç”±é…ç½®ï¼šæ·»åŠ  /login å’Œ /datasource è·¯ç”±ï¼Œå®ç°è®¤è¯å®ˆå«

### å¾…æµ‹è¯•é¡¹
- æ— 

### æµ‹è¯•è¯´æ˜
- ä½¿ç”¨ create-user CLI åˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼ˆadmin/admin123ï¼‰
- æ³¨æ„ï¼šåœ¨ä¿®å¤ ID ç”Ÿæˆå‰åˆ›å»ºçš„æ—§æ•°æ®æºè®°å½•ä»å­˜åœ¨ç©º idï¼Œéœ€è¦æ‰‹åŠ¨æ¸…ç†æˆ–å¿½ç•¥

### ä¸‹ä¸€æ­¥å»ºè®®
1. åˆ›å»ºæµ‹è¯•ç”¨æˆ·å¹¶éªŒè¯å®Œæ•´ç™»å½•æµç¨‹
2. ç«¯åˆ°ç«¯æµ‹è¯•éªŒè¯æ•°æ®æºç®¡ç†åŠŸèƒ½
3. ç»§ç»­æ¨è¿›å…¶ä»– changeï¼ˆmvp-report-designer æµ‹è¯•æˆ– infrastructure å½’æ¡£ï¼‰
